<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.summ.mapper.JCouponListMapper">

    <!-- 通用查询结果列-->
    <sql id="Base_Column_List">
		couponListId, couponCode, couponId, shopId, customerId, couponStatus, missionId, createTime, isDel
	</sql>

    <update id="deleteCoupon" parameterType="java.lang.Integer">
		UPDATE j_coupon_list
		SET isDel = 17
		WHERE couponListId = #{0}
	</update>

    <select id="getListById" parameterType="java.lang.Integer" resultType="com.summ.model.response.CustomerCouponListRes">
		SELECT j.*,d1.INFO AS couponStatusInfo,d2.INFO AS shopIdInfo,d3.INFO AS isDelInfo
		FROM j_coupon_list j
		LEFT JOIN  j_dict_info d1 ON d1.ID = j.couponStatus
		LEFT JOIN  j_dict_info d2 ON d2.ID = j.shopId
		LEFT JOIN  j_dict_info d3 ON d3.ID = j.isDel
		WHERE isDel = 16
		AND customerId = #{0}
	</select>

</mapper>